<!DOCTYPE html>
<html>
	<head>

		<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>

		<script> 
		    $(function(){
		      $("#Header1").load("Header.html"); 
			  $("#PH_modules_list").load("Modules.html"); 
		    });
		</script> 

		<script> 
			function nextTurn(){
				var found = false;
				$("#order li").each(function(idx, li){
					if ($(li).hasClass("active")){
						$(li).removeClass("active");
						if (idx == $("#order li").length - 1){
							$($("#order li").get(0)).addClass("active");
						} else {
							$($("#order li").get(idx + 1)).addClass("active");
						}
						found = true;
						return false;
					}
				});

				if (!found) {
					$("#order li").first().addClass("active");
				}
			}

			function add(){
				var initiative = 0;
				if ($("#initiative").val() == -1) {
					initiative = parseInt(Math.random() * 20 + 1);
				} else {
					initiative = $("#initiative").val();
				}

				var item = "";

				item += "<li>";
				item += initiative ;
				item += " | ";
				item += $("#name").val();
				item += " | ";
				item += "10";
				item += " | ";
				item += "<button id=\"add\" type=\"button\" onclick=\"addHealth(this, 1)\">add 1HP</button>"
				item += "<button id=\"add\" type=\"button\" onclick=\"addHealth(this, 5)\">add 5HP</button>"
				item += "<button id=\"add\" type=\"button\" onclick=\"addHealth(this, 10)\">add 10HP</button>"
				item += "<button id=\"add\" type=\"button\" onclick=\"addHealth(this, -1)\">minus 1HP</button>"
				item += "<button id=\"add\" type=\"button\" onclick=\"addHealth(this, -5)\">minus 5HP</button>"
				item += "<button id=\"add\" type=\"button\" onclick=\"addHealth(this, -10)\">minus 10HP</button>"
				item += "<button id=\"add\" type=\"button\" onclick=\"removeChar(this)\">Remove</button>"
				item += "</li>";

				$("#order").append(item)

				var items = $("#order li").get();
				items.sort(function(a,b){
					var keyA = $(a).text();
					var keyB = $(b).text();

					if (parseInt(keyA.split("|")) < parseInt(keyB.split("|"))) return -1;
					if (parseInt(keyA.split("|")) > parseInt(keyB.split("|"))) return 1;
					return 0;
				});
				$("#order").empty().append(items.reverse());
			}

			function removeChar(sender) {
				$(sender).parent().remove();
			}

			function addHealth(sender, amount) {
				var row = $(sender).parent()
				var children = row.children();
				var items = row.text().split(" | ");
				items[2] = parseInt(items[2]) + amount;
				items[3] = ""
				var values = items.join(" | ");
				row.text(values).append(children);
			}
		</script>

		<title>DND TOOLS</title> 
	</head>
	<link rel="stylesheet" type="text/css" href="DNDStyle.css">
	<body>
		<div Id = "Header1">
			<! import header goes here />
		</div>
		<div class= "body_content">
			<div class= "PH_ads">
				<p>w/e here</p>
			</div>
			<div class= "PH_main_content" id="main">

				<ul id="order" style="list-style-type:none">
				</ul> 

				<button id="turn" type="button" onclick="nextTurn()">Next Turn</button>

				<input type="text" id="name">
				<input type="text" id="initiative">
				<button id="add" type="button" onclick="add()">add</button>

			</div>
			<div class= "PH_modules_list"id="PH_modules_list">
			</div>
		</div>
		<div class = "footer">
			<div class ="navbar">
				<p>Navbar</p>
			</div>
		</div>
	</body>
</html>
