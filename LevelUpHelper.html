<!DOCTYPE html>
<html>
	<head>

		<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>

		<script> 
		    $(function(){
		      $("#Header1").load("Header.html"); 
			  $("#PH_modules_list").load("Modules.html"); 
		    });

		    function addClass() {
		    	var span = '<span name="class">';

		    	span += $("span[name=class]").first().html();

		    	span = span.substring(0, span.indexOf('<br>'));

		    	span += "<button name=\"remove_but\" type=\"button\" onclick=\"removeClass(this)\">Remove</button>"

		    	span += "<br />"

		    	span += "</span>";


		    	$("#classes").append(span);

		    }

		    function removeClass(sender) {
		    	$(sender).parent().remove();
		    }

		    function calcMod(sender){

		    	var col = $("#statsTable tr").first().children().index($(sender).parent());

		    	var mod = parseInt($(sender).val()) || 0;
		    	mod = mod / 2;
		    	mod = mod - 5;
		    	mod = Math.floor(mod);


		    	switch (col) {
					case 0:
						$("#STRmod").html(mod);
						break;
					case 1:
						$("#DEXmod").html(mod);
						break;
					case 2:
						$("#CONmod").html(mod);
						break;
					case 3:
						$("#INTmod").html(mod);
						break;
					case 4:
						$("#WISmod").html(mod);
						break;
					case 5:
						$("#CHAmod").html(mod);
						break;
				}
		    }

		    function addAttack() {
		    	var row = "<tr>";
		    	row += '<td><input name="attName"></input></td>';
				row += '<td><input name="attBonus"></input></td>';
				row += '<td><input name="attType"></input></td>';
				row += '<td><input name="attDmg"></input></td>';
				row += '<td><input name="attDetails"></input></td>';
				row += '<td><button id="remove_but" type="button" onclick="removeAttack(this)">Remove</button></td>';
				row += '</tr>';

				$("#attacksTable").append(row);
		    }

		    function removeAttack(sender) {
		    	$(sender).parent().parent().remove();
		    }

		    function save() {
				var saveStr = new Object();

				saveStr["name"] = $("#charName").val();
				saveStr["background"] = $("#backgrounds").val();


				saveStr["alignment"] = $("input[name=alignment]:checked").val();


				if ($("#charRace").val() == "Custom") {
					saveStr["race"] = $("#charRaceCustom").val();
				} else {
					saveStr["race"] = $("#charRace").val();
				}

				saveStr["class"] = new Object();
				
				$("#classes").children().each(function (idx, itm) {
					var chaClass = $($(itm).children().get(1)).val();
					var chaLevel = $($(itm).children().get(3)).val();
					var chaClassRow = {class: chaClass, level: chaLevel};
					(saveStr["class"])[idx] = chaClassRow;
				});


				saveStr["proficiencies"] = new Array();
				saveStr["languages"] = new Array();

				$("#proficienciesList input:checked").each(function(idx, itm) {
					saveStr["proficiencies"].push($(itm).val());
				});
				
				$("#languagesList input:checked").each(function(idx, itm) {
					saveStr["languages"].push($(itm).val());
				});


				saveStr["statistics"] = JSON.stringify($("#statsTable").html());
				saveStr["attacks"] = JSON.stringify($("#attacksTable").html());

				alert("Copy and store this string:\n" + JSON.stringify(saveStr));
		    }

		    function load() {
		    	var loadStr = JSON.parse(window.prompt("Load","Enter saved string"));

				if (loadStr != null) {
					$("#charName").val(loadStr["name"]);
					$("#backgrounds").val(loadStr["background"]);


					$("input[value=" + loadStr["alignment"] + "]").prop('checked', true);


					$("#charRace").val(loadStr["race"]);


					$.each(loadStr["class"], function(idx, itm){
						console.log(itm);
						if (idx > 0) {
							addClass();
						}
						$($($("#classes").children().get(idx)).children().get(1)).val(itm["class"]);
						$($($("#classes").children().get(idx)).children().get(3)).val(itm["level"]);
					});
					

					$("#proficienciesList input:checked").each(function(idx, itm) {
						$(itm).prop('checked', false);
					});
					$(loadStr["proficiencies"]).each(function(idx, itm) {
						$("input[name=proficiencies][value='" + itm + "']").prop('checked', true);
					});

					$("#languagesList input:checked").each(function(idx, itm) {
						$(itm).prop('checked', false);
					});
					$(loadStr["languages"]).each(function(idx, itm) {
						$("input[name=languages][value='" + itm + "']").prop('checked', true);
					});

					$($("#statsTable").get(0)).html(JSON.parse(loadStr["statistics"]));
					$($("#attacksTable").get(0)).html(JSON.parse(loadStr["attacks"]));

				}
		    }
		</script> 

		<title>DND TOOLS</title> 
	</head>
	<link rel="stylesheet" type="text/css" href="DNDStyle.css">
	<body>
		<div Id = "Header1">
			<!-- import header goes here -->
		</div>
		<div Class = "sickdragonimg_ph">
		</div>
		<div class= "body_content">
			<div class= "PH_ads">
				<p>w/e here</p>
			</div>
			<div class= "PH_main_content" id="main">
				<div>
					<h1>Character Helper</h1>	
					<label>Name:</label>
					<input type="text" id="charName"></input><br />
					<label>Race:</label>
					<select id="charRace">
					  <option value="Human">Human</option>
					  <option value="Elf">Elf</option>
					  <option value="Dwarf">Dwarf</option>
					  <option value="Gnome">Gnome</option>
					  <option value="Half-Elf">Half-Elf</option>
					  <option value="Half-Orc">Half-Orc</option>
					  <option value="Halfing">Halfling</option>
					  <option value="Dragonborne">Dragonborn</option>
					</select>
					<span>custom:</span>
					<input type="text" id="charRaceCustom"></input><br />
					
					<span id="classes">
					<span name="class">
					<label>Class</label>
					<select name="charClass">
					  <option value="Barbarian">Barbarian</option>
					  <option value="Bard">Bard</option>
					  <option value="Cleric">Cleric</option>
					  <option value="Druid">Druid</option>
					  <option value="Fighter">Fighter</option>
					  <option value="Monk">Monk</option>
					  <option value="Paladin">Paladin</option>
					  <option value="Ranger">Ranger</option>
					  <option value="Rogue">Rogue</option>
					  <option value="Sorcerer">Sorcerer</option>
					  <option value="Warlock">Warlock</option>
					  <option value="Wizard">Wizard</option>
					</select>
					<span>level:</span>
					<input type="text" id="charLvl1"></input>
					<br />
					</span>
					</span>
					<button id = "multiClassCheck" onclick="addClass()">Add Class</button>
					<br />
					<label>Alignment:</label>
					<table Class = "alignmentTable">
					  <tr>
						<td><input name ="alignment"  type = "radio" id = "LGradio" value="LG">Lawful Good</input></td>
						<td><input name ="alignment"  type = "radio" id = "NGradio" value="NG">Neutral Good</input></td>
						<td><input name ="alignment"  type = "radio" id = "CGradio" value="CG">Chaotic Good</input></td>
					  </tr>
					  <tr>
						<td><input name ="alignment"  type = "radio" id = "LNradio" value="LN">Lawful Neutral</input></td>
						<td><input name ="alignment"  type = "radio" id = "TNradio" value="TN">True Neutral</input></td>
						<td><input name ="alignment"  type = "radio" id = "CNradio" value="CN">Chaotic Neutral</input></td>
					  </tr>
					  <tr>
						<td><input name ="alignment"  type = "radio" id = "LEradio" value="LE">Lawful Evil</input></td>
						<td><input name ="alignment"  type = "radio" id = "NEradio" value="NE">Neutral Evil</input></td>
						<td><input name ="alignment"  type = "radio" id = "CLradio" value="CE">Chaotic Evil</input></td>
					  </tr>
					</table>
					<label>Stastistics:</label><br />
					<table Class = "statsTable" id="statsTable">
					  <tr>
						<td><input type="text" id="charSTR" oninput="calcMod(this)">Strength</input></td>
						<td><input type="text" id="charDEX" oninput="calcMod(this)">Dexterity</input></td>
						<td><input type="text" id="charCON" oninput="calcMod(this)">Constitution</input></td>
						<td><input type="text" id="charINT" oninput="calcMod(this)">Intelligence</input></td>
						<td><input type="text" id="charWIS" oninput="calcMod(this)">Wisdom</input></td>
						<td><type="text" id="charCHA" oninput="calcMod(this)">Charisma</input></td>
					  </tr>
					  <tr>
						<td><label id ="STRmod">+0</label></td>
						<td><label id ="DEXmod">+0</label></td>
						<td><label id ="CONmod">+0</label></td>
						<td><label id ="INTmod">+0</label></td>
						<td><label id ="WISmod">+0</label></td>
						<td><label id ="CHAmod">+0</label></td>	
					  </tr>
					</table>
					<label>Saving Throws</label><br />
					<input name ="savingThrows"  type ="checkbox" id="charSTRsavethrow">Strength</input>
					<input name ="savingThrows"  type ="checkbox" id="charDEXsavethrow">Dexterity</input>
					<input name ="savingThrows"  type ="checkbox" id="charCONsavethrow">Constitution</input>
					<input name ="savingThrows"  type ="checkbox" id="charINTsavethrow">Intelligence</input>
					<input name ="savingThrows"  type ="checkbox" id="charWISsavethrow">Wisdom</input>
					<input name ="savingThrows"  type ="checkbox" id="charCHAsavethrow">Charisma</input><br />
					<label>proficiencies</label><br />
					<ul class = "doublelist" id="proficienciesList">
						<li><input name ="proficiencies" value="Acrobatics" type ="checkbox" id="profAcrobatics_DEX">Acrobatics(Dex)</input></li>
						<li><input name ="proficiencies" value="Animal Handling" type ="checkbox" id="profAnimalHandling_WIS">Animal Handling(Wis)</input></li>
						<li><input name ="proficiencies" value="Arcana" type ="checkbox" id="profArcana_INT">Arcana(Int)</input></li>
						<li><input name ="proficiencies" value="Athletics" type ="checkbox" id="profAthletics_STR">Athletics(Str)</input></li>
						<li><input name ="proficiencies" value="Deception" type ="checkbox" id="profDeception_CHA">Deception(Cha)</input></li>
						<li><input name ="proficiencies" value="History" type ="checkbox" id="profHistory_INT">History(Int)</input></li>
						<li><input name ="proficiencies" value="Insight" type ="checkbox" id="profInsight_WIS">Insight(Wis)</input></li>
						<li><input name ="proficiencies" value="Intimidation" type ="checkbox" id="profIntimidation_CHA">Intimidation(Cha)</input></li>
						<li><input name ="proficiencies" value="Investigation" type ="checkbox" id="profInvestigation_INT">Investigation(Int)</input></li>
						<li><input name ="proficiencies" value="Medicine" type ="checkbox" id="profMedicine_WIS">Medicine(Wis)</input></li>
						<li><input name ="proficiencies" value="Nature" type ="checkbox" id="profNature_INT">Nature(Int)</input></li>
						<li><input name ="proficiencies" value="Perception" type ="checkbox" id="profPerception_WIS">Perception(Wis)</input></li>
						<li><input name ="proficiencies" value="Performance" type ="checkbox" id="profPerformance_CHA">Performance(Cha)</input></li>
						<li><input name ="proficiencies" value="Persuasion" type ="checkbox" id="profPersuasion_CHA">Persuasion(Cha)</input></li>
						<li><input name ="proficiencies" value="Sleight Of Hand" type ="checkbox" id="profSleightOfHand_DEX">Sleight Of Hand(Dex)</input></li>
						<li><input name ="proficiencies" value="Stealth" type ="checkbox" id="profStealth_DEX">Stealth(Dex)</input></li>
						<li><input name ="proficiencies" value="Survival" type ="checkbox" id="profSurvival_WIS">Survival(Wis)</input></li>
					</ul>
					<label>languages</label><br />
					<ul class = "doublelist" id="languagesList">
						<li><input name ="languages" value="Common" type ="checkbox" id="langCommon">Common</input></li>
						<li><input name ="languages" value="Dwarvish" type ="checkbox" id="langDwarvish">Dwarvish</input></li>
						<li><input name ="languages" value="Elvish" type ="checkbox" id="langElvish">Elvish</input></li>
						<li><input name ="languages" value="Giant" type ="checkbox" id="langGiant">Giant</input></li>
						<li><input name ="languages" value="Gnomish" type ="checkbox" id="langGnomish">Gnomish</input></li>
						<li><input name ="languages" value="Goblin" type ="checkbox" id="langGoblin">Goblin</input></li>
						<li><input name ="languages" value="Halfling" type ="checkbox" id="langHalfing">Halfling</input></li>
						<li><input name ="languages" value="Orc" type ="checkbox" id="langOrc">Orc</input></li>
						<li><input name ="languages" value="Abyssal" type ="checkbox" id="langAbyssal">Abyssal</input></li>
						<li><input name ="languages" value="Celestial" type ="checkbox" id="langCelestial">Celestial</input></li>
						<li><input name ="languages" value="Draconic" type ="checkbox" id="langDraconic">Draconic</input></li>
						<li><input name ="languages" value="Deep Speech" type ="checkbox" id="langDeepSpeech">Deep Speech</input></li>
						<li><input name ="languages" value="Infernal" type ="checkbox" id="langInfernal">Infernal</input></li>
						<li><input name ="languages" value="Primordial" type ="checkbox" id="langPrimordial">Primordial</input></li>
						<li><input name ="languages" value="Sylvan" type ="checkbox" id="langSylvan">Sylvan</input></li>
						<li><input name ="languages" value="UnderCommon" type ="checkbox" id="langUnderCommon">UnderCommon</input></li>
					</ul>
					<label>Background</label><br />
					<select id="backgrounds">
					  <option value="Acolyte">Acolyte</option>
					  <option value="Charlatan">Charlatan</option>
					  <option value="Criminal">Criminal</option>
					  <option value="Entertainer">Entertainer</option>
					  <option value="Folk Hero">Folk Hero</option>
					  <option value="Guild Artisan">Guild Artisan</option>
					  <option value="Hermit">Hermit</option>
					  <option value="Noble">Noble</option>
					  <option value="Outlander">Outlander</option>
					  <option value="Sage">Sage</option>
					  <option value="Sailor">Sailor</option>
					  <option value="Soldier">Soldier</option>
					  <option value="Urchin">Urchin</option>
					  <option value="Custom">Custom</option>
					</select>
					<br />
					<label>Traits</label><br />
					<!-- auto populate from background, class and race -->
					<label>Feats</label><br />
					<select id="feats">
					  <option value="Alert">Alert</option>
					  <option value="Athlete">Athlete</option>
					  <option value="Actor">Actor</option>
					  <option value="Charger">Charger</option>
					  <option value="Crossbow Expert">Crossbow Expert</option>
					  <option value="Defensive Duelist">Defensive Duelist</option>
					  <option value="Dual Wielder">Dual Wielder</option>
					  <option value="Dungeon Delver">Dungeon Delver</option>
					  <option value="Durable">Durable</option>
					  <option value="Elemental Adept">Elemental Adept</option>
					  <option value="Grappler">Grappler</option>
					  <option value="Great Weapons Master">Great Weapons Master</option>
					  <option value="Healer">Healer</option>
					  <option value="Heavily Armored">Heavily Armored</option>
					  <option value="Heavy Armor Master">Heavy Armor Master</option>
					  <option value="Inspiring Leader">Inspiring Leader</option>
					  <option value="Keen Mind">Keen Mind</option>
					  <option value="Lightly Armored">Lightly Armored</option>
					  <option value="Linguist">Linguist</option>
					  <option value="Lucky">Lucky</option>
					  <option value="Mage Slayer">Mage Slayer</option>
					  <option value="Magic Initiate">Magic Initiate</option>
					  <option value="Martial Adept">Martial Adept</option>
					  <option value="Medium Armor Master">Medium Armor Master</option>
					  <option value="Mobile">Mobile</option>
					  <option value="Moderately Armored">Moderately Armored</option>
					  <option value="Mounted Combatant">Mounted Combatant</option>
					  <option value="Observant">Observant</option>
					  <option value="Polearm Master">Polearm Master</option>
					  <option value="Resilient">Resilient</option>
					  <option value="Ritual Caster">Ritual Caster</option>
					  <option value="Savage Attacker">Savage Attacker</option>
					  <option value="Sentinel">Sentinel</option>
					  <option value="Sharpshooter">Sharpshooter</option>
					  <option value="Shield Master">Shield Master</option>
					  <option value="Skilled">Skilled</option>
					  <option value="Skulker">Skulker</option>
					  <option value="Spell Sniper">Spell Sniper</option>
					  <option value="Tavern Brawler">Tavern Brawler</option>
					  <option value="Tough">Tough</option>
					  <option value="War Caster">War Caster</option>
					  <option value="Weapon Master">Weapon Master</option>
					</select>
					<button onclick="addFeat()">Add Feat</button>
					<br />
					<label>AC </label><br /> 
					<!-- get armour they are wearing then auto calc -->
					<label>Attacks</label><br />
					<table Class = "attacksTable" id="attacksTable">
					  <tr>
						<th><span>Name</span></th>
						<th><span>Attack Bonus</span></th>
						<th><span>Damange Type</span></th>
						<th><span>Damage</span></th>
						<th><span>Aditional Details</span></th>
						<th><button onclick="addAttack()">Add New Attack</button></th>
					  </tr>
					  <tr>
						<td><input name="attName"></input></td>
						<td><input name="attBonus"></input></td>
						<td><input name="attType"></input></td>
						<td><input name="attDmg"></input></td>
						<td><input name="attDetails"></input></td>
						<td><button id="remove_but" type="button" onclick="removeAttack(this)">Remove</button></td>
					  </tr>
					</table>
<!-- 					new charecter or import 
Name, class multi?, level race 
alignmnent speed current experience
Stats
Saving throws and proficiencys
traits langauges Feats
AC
Attacks -->
				
				</div>
			</div>
			<div class= "PH_modules_list" id="PH_modules_list">
			</div>
		</div>
		<div class = "footer">
			<div class ="navbar">
				<p>Navbar</p>
			</div>
		</div>
	</body>
</html>
